# Product Requirements Document: Ralph

**Date:** 2026-01-10
**Author:** jean-philippebrule
**Version:** 1.0
**Project Type:** library
**Project Level:** 3
**Status:** Draft

---

## Document Overview

This Product Requirements Document (PRD) defines the functional and non-functional requirements for Ralph - the autonomous execution workflow for BMAD Method. It serves as the source of truth for what will be built and provides traceability from requirements through implementation.

**Related Documents:**
- Product Brief: `docs/product-brief-ralph-2026-01-10.md`

---

## Executive Summary

Ralph is a BMAD Method workflow (`bmad:bmm:ralph`) that serves as Phase 5 - Autonomous Execution. After completing product brief, PRD, architecture, and sprint planning, developers run `/ralph` to automatically implement all stories using Claude Code in an autonomous loop.

Ralph ingests all BMAD documentation (product brief, PRD, architecture, sprint status, stories), asks clarifying questions about loop configuration, generates the necessary loop files, and executes until all stories pass quality gates.

**The BMAD Workflow with Ralph:**
```
Phase 1: Product Brief     → Define vision
Phase 2: PRD               → Define requirements
Phase 3: Architecture      → Design solution
Phase 4: Sprint Planning   → Create stories
Phase 5: Ralph Execution   → Autonomous implementation (NEW)
```

---

## Product Goals

### Business Objectives

- Create `/ralph` workflow that automates story implementation from launch to completion
- Achieve flawless Claude Code integration with zero manual intervention during execution
- Enable "complete BMAD planning → run /ralph → autonomous execution" workflow
- Package as distributable BMAD module for community use

### Success Metrics

- Workflow successfully reads all BMAD documentation types
- Loop executes without manual intervention until completion or configured limits
- Quality gates (tests, typechecks) enforced automatically before commits
- End-to-end time from `/ralph` to loop start < 2 minutes
- Other BMAD users can install and use Ralph in their projects

---

## Functional Requirements

Functional Requirements (FRs) define **what** the system does - specific features and behaviors.

Each requirement includes:
- **ID**: Unique identifier (FR-001, FR-002, etc.)
- **Priority**: Must Have / Should Have / Could Have / Won't Have (MoSCoW)
- **Description**: What the system should do
- **Acceptance Criteria**: How to verify it's complete

---

### FR-001: Document Ingestion

**Priority:** Must Have

**Description:**
Ralph workflow reads all BMAD documentation from the project folder:
- `docs/product-brief-*.md`
- `docs/prd-*.md`
- `docs/architecture-*.md`
- `docs/sprint-status.yaml`
- `docs/stories/**/*.md`

**Acceptance Criteria:**
- [ ] Locates and reads product brief (extracts vision, constraints, risks)
- [ ] Locates and reads PRD (extracts FRs, NFRs, epics, acceptance criteria)
- [ ] Locates and reads architecture (extracts tech stack, patterns, data models)
- [ ] Parses sprint-status.yaml (extracts epics, stories, status, dependencies)
- [ ] Reads individual story files for detailed acceptance criteria
- [ ] Gracefully handles missing optional documents with warnings
- [ ] Reports summary of documents found to user

**Dependencies:** None

---

### FR-002: User Interview for Loop Configuration

**Priority:** Must Have

**Description:**
Ralph asks clarifying questions before generating loop files to configure scope, quality gates, and loop parameters.

**Acceptance Criteria:**
- [ ] Displays summary of found documentation (counts of epics, stories, etc.)
- [ ] Asks which epics/stories to include (options: all pending, specific epic, specific stories)
- [ ] Asks for quality gate commands with sensible defaults:
  - Typecheck command (e.g., `npm run typecheck`)
  - Test command (e.g., `npm test`)
  - Lint command (e.g., `npm run lint`)
  - Build command (optional)
- [ ] Asks for max iterations before stopping (default: 50)
- [ ] Asks for stuck threshold - failures before flagging (default: 3)
- [ ] Asks about branch creation and naming convention
- [ ] Accepts optional custom instructions to include in prompt
- [ ] Allows user to review and confirm configuration before proceeding

**Dependencies:** FR-001

---

### FR-003: Story Conversion to prd.json

**Priority:** Must Have

**Description:**
Converts BMAD stories from sprint-status.yaml and story files into Ralph's prd.json format with proper ordering by dependencies.

**Acceptance Criteria:**
- [ ] Each selected story becomes a prd.json entry with:
  - `id`: Story ID from BMAD
  - `title`: Story title
  - `description`: Full story description
  - `acceptanceCriteria`: Array from story file
  - `priority`: Numeric order based on dependencies
  - `passes`: false (initial state)
  - `notes`: empty string
- [ ] Stories ordered by dependency (schema → backend → UI → integration)
- [ ] "Typecheck passes" added to every story's criteria
- [ ] UI stories include "Verify in browser" criterion
- [ ] Branch name derived from epic/feature name (kebab-case)
- [ ] Project name and description populated from BMAD docs

**Dependencies:** FR-001, FR-002

---

### FR-004: Prompt Generation

**Priority:** Must Have

**Description:**
Generates `prompt.md` that synthesizes all BMAD knowledge into instructions each Claude iteration reads.

**Acceptance Criteria:**
- [ ] Includes condensed project overview from product brief
- [ ] Includes architecture patterns and tech stack decisions
- [ ] Includes quality gate commands from configuration
- [ ] Includes rules for story execution:
  1. Pick highest priority story where passes=false
  2. Implement following architecture patterns
  3. Run quality gates
  4. Commit if passing
  5. Append progress.txt with learnings and 1-line note for next iteration
  6. Update prd.json to mark story as passes=true
- [ ] Includes AGENTS.md update instructions
- [ ] Includes current sprint context from sprint-status.yaml
- [ ] Includes stuck detection behavior (output STUCK signal after N failures)

**Dependencies:** FR-001, FR-002

---

### FR-005: Loop Script Generation

**Priority:** Must Have

**Description:**
Generates `loop.sh` bash script that runs Claude CLI in autonomous loop.

**Acceptance Criteria:**
- [ ] Uses `claude --print --dangerously-skip-permissions` flags
- [ ] Accepts prompt.md as input to each iteration
- [ ] Reads prd.json to determine if work remains
- [ ] Runs configured quality gates after each iteration
- [ ] Creates git commit if all gates pass
- [ ] Updates prd.json to mark completed story as `passes: true`
- [ ] Tracks consecutive failures per story for stuck detection
- [ ] Exits with STUCK status if same story fails N times (configurable)
- [ ] Exits with COMPLETE status when all stories have `passes: true`
- [ ] Exits with MAX_ITERATIONS status if limit reached
- [ ] Creates feature branch if configured (before first iteration)
- [ ] Outputs clear progress messages during execution

**Dependencies:** FR-003, FR-004

---

### FR-006: Loop Execution and Monitoring

**Priority:** Must Have

**Description:**
After generating files, asks user to confirm and starts the loop with monitoring output.

**Acceptance Criteria:**
- [ ] Displays summary before starting:
  - Stories to implement (count and list)
  - Quality gates configured
  - Max iterations / stuck threshold
  - Branch name (if creating)
- [ ] Asks user to confirm: "Ready to start the loop?"
- [ ] Starts loop.sh in foreground with visible output
- [ ] Shows real-time progress:
  - Current iteration number
  - Current story being worked
  - Quality gate results (pass/fail)
  - Commit hash on success
- [ ] Reports final status with summary:
  - COMPLETE: All N stories passed
  - STUCK: Story X failed Y times, may need splitting
  - MAX_ITERATIONS: Completed X of Y stories, Z remaining

**Dependencies:** FR-005

---

### FR-007: Sprint Status Updates

**Priority:** Should Have

**Description:**
Updates `docs/sprint-status.yaml` as stories complete in the loop.

**Acceptance Criteria:**
- [ ] Marks stories as status "done" when they pass in prd.json
- [ ] Updates `last_updated` timestamp
- [ ] Updates sprint metrics:
  - `stories_completed` count
  - `stories_in_progress` count
  - `stories_not_started` count
- [ ] Preserves all other sprint-status.yaml content

**Dependencies:** FR-006

---

### FR-008: Archive Previous Runs

**Priority:** Should Have

**Description:**
Before starting a new loop for a different feature, archives previous run files.

**Acceptance Criteria:**
- [ ] Detects if `ralph/prd.json` exists
- [ ] Compares branchName to new feature's branch name
- [ ] If different AND progress.txt has content beyond header:
  - Creates archive folder: `ralph/archive/YYYY-MM-DD-{feature-name}/`
  - Moves prd.json, progress.txt, prompt.md to archive
- [ ] Initializes fresh progress.txt with new feature header
- [ ] If same feature, asks: "Resume existing loop or start fresh?"

**Dependencies:** FR-002

---

### FR-009: Progress File Initialization

**Priority:** Must Have

**Description:**
Creates/initializes progress.txt with project context header for iteration-to-iteration knowledge sharing.

**Acceptance Criteria:**
- [ ] Creates `ralph/progress.txt` if not exists
- [ ] Includes header with:
  - Project name
  - Date started
  - Epic/feature being worked
  - Branch name
- [ ] Format supports append-only updates:
  ```
  ## Iteration N - {Story ID}
  Completed: {what was done}
  Learning: {pattern or gotcha discovered}
  Note for next: {1-line context for next iteration}
  ```
- [ ] Each iteration appends, never overwrites

**Dependencies:** FR-002

---

### FR-010: AGENTS.md Integration

**Priority:** Should Have

**Description:**
Prompt instructs each iteration to update relevant AGENTS.md files with discovered patterns and gotchas.

**Acceptance Criteria:**
- [ ] Prompt includes AGENTS.md update instructions
- [ ] Specifies what to add:
  - Patterns discovered ("this codebase uses X for Y")
  - Gotchas ("do not forget to update Z when changing W")
  - File locations ("the settings panel is in component X")
- [ ] Instructs to find or create appropriate AGENTS.md (root or subdirectory)
- [ ] Respects existing AGENTS.md structure and formatting

**Dependencies:** FR-004

---

## Non-Functional Requirements

Non-Functional Requirements (NFRs) define **how** the system performs - quality attributes and constraints.

---

### NFR-001: Reliability - Error Handling

**Priority:** Must Have

**Description:**
Loop handles errors gracefully without crashing or losing progress.

**Acceptance Criteria:**
- [ ] Claude CLI failures (network, auth, etc.) don't crash the loop
- [ ] Quality gate failures are logged, loop continues to next iteration
- [ ] prd.json updates are atomic (write to temp file, then rename)
- [ ] progress.txt survives crashes (append-only, flushed after each write)
- [ ] Ctrl+C (SIGINT) cleanly stops loop, preserves current state
- [ ] Loop can be resumed after any type of interruption

**Rationale:** Users may leave loops running overnight; crashes lose work and trust.

---

### NFR-002: Reliability - Stuck Detection

**Priority:** Must Have

**Description:**
Loop detects when it's stuck on a story and stops instead of burning iterations.

**Acceptance Criteria:**
- [ ] Tracks consecutive failures per story ID
- [ ] Resets failure count when a different story is attempted
- [ ] Exits with STUCK status after N consecutive failures (configurable, default 3)
- [ ] Logs clear message: "Story {ID} failed {N} times. May need to be split into smaller stories."
- [ ] Preserves state so user can investigate and retry

**Rationale:** Prevents wasted Claude API usage and time on unsolvable stories.

---

### NFR-003: Usability - Clear Output

**Priority:** Should Have

**Description:**
Loop provides clear, readable progress output that users can understand at a glance.

**Acceptance Criteria:**
- [ ] Each iteration clearly labeled: `=== Iteration 5/50: US-003 ===`
- [ ] Quality gate results shown: `Typecheck: PASS | Tests: PASS | Lint: PASS`
- [ ] Commit shown on success: `Committed: abc1234 - Add status badge to task cards`
- [ ] Progress bar or fraction: `[3/12 stories complete]`
- [ ] Final summary formatted clearly:
  ```
  === LOOP COMPLETE ===
  Stories: 12/12 passed
  Iterations: 18
  Duration: 2h 34m
  Branch: ralph/task-status
  ```

**Rationale:** User should understand loop state at a glance, even when checking periodically.

---

### NFR-004: Usability - Resumability

**Priority:** Should Have

**Description:**
Loop can be stopped and resumed without losing progress.

**Acceptance Criteria:**
- [ ] prd.json tracks which stories have `passes: true`
- [ ] Restarting `/ralph` detects existing prd.json
- [ ] Offers choice: "Resume (5 stories remaining) or start fresh?"
- [ ] Resume continues from next pending story
- [ ] progress.txt context preserved for resumed iterations

**Rationale:** Users may need to stop for meetings, debugging, or overnight breaks.

---

### NFR-005: Compatibility - Claude CLI

**Priority:** Must Have

**Description:**
Works with current Claude Code CLI.

**Acceptance Criteria:**
- [ ] Uses `claude --print --dangerously-skip-permissions` flags correctly
- [ ] Compatible with Claude Code CLI as of 2026
- [ ] Documents minimum CLI version if specific features required
- [ ] Fails gracefully with clear message if CLI not found or wrong version

**Rationale:** Must work with user's Claude subscription.

---

### NFR-006: Compatibility - Shell

**Priority:** Must Have

**Description:**
Loop script runs on standard bash environments.

**Acceptance Criteria:**
- [ ] Works on macOS with default zsh/bash
- [ ] Works on Linux with bash
- [ ] Works on Windows Subsystem for Linux (WSL)
- [ ] Only requires common tools: `bash`, `jq`, `git`
- [ ] Checks for required tools at startup, fails clearly if missing

**Rationale:** Cross-platform developer support without exotic dependencies.

---

### NFR-007: Maintainability - BMAD Patterns

**Priority:** Should Have

**Description:**
Workflow follows BMAD conventions for consistency with the ecosystem.

**Acceptance Criteria:**
- [ ] Workflow file structure matches other `bmad:bmm` workflows
- [ ] Uses `helpers.md` functions where applicable
- [ ] Adds `ralph` entry to `bmm-workflow-status.yaml` template
- [ ] Updates workflow status appropriately during execution
- [ ] Documentation follows BMAD template style
- [ ] Installs to `~/.claude/config/bmad/modules/bmm/workflows/`

**Rationale:** Consistency makes Ralph feel native to BMAD.

---

## Epics

Epics are logical groupings of related functionality that will be broken down into user stories during sprint planning (Phase 4).

Each epic maps to multiple functional requirements and will generate 2-10 stories.

---

### EPIC-001: BMAD Document Ingestion

**Description:**
Read and parse all BMAD documentation from the project to understand what needs to be built and how.

**Functional Requirements:**
- FR-001

**Story Count Estimate:** 4-5

**Priority:** Must Have

**Business Value:**
Foundation for everything else - Ralph can't generate correct loop files without understanding the project's vision, requirements, and architecture.

---

### EPIC-002: Loop Configuration Interview

**Description:**
Interactive interview with user to configure loop parameters before generation.

**Functional Requirements:**
- FR-002

**Story Count Estimate:** 3-4

**Priority:** Must Have

**Business Value:**
Ensures loop is configured correctly for the specific project's needs - quality gates, scope, iteration limits. Prevents misconfigured runs.

---

### EPIC-003: Loop File Generation

**Description:**
Generate all files needed to run the autonomous loop: prd.json, prompt.md, loop.sh, progress.txt.

**Functional Requirements:**
- FR-003
- FR-004
- FR-005
- FR-009

**Story Count Estimate:** 5-7

**Priority:** Must Have

**Business Value:**
Core deliverable - the files that make autonomous execution possible. This is where BMAD knowledge becomes executable.

---

### EPIC-004: Loop Execution & Monitoring

**Description:**
Execute the loop with real-time monitoring and proper termination handling.

**Functional Requirements:**
- FR-006

**NFRs Addressed:**
- NFR-001: Error Handling
- NFR-002: Stuck Detection
- NFR-003: Clear Output
- NFR-004: Resumability

**Story Count Estimate:** 4-6

**Priority:** Must Have

**Business Value:**
The payoff - autonomous implementation that runs until done. User can walk away and return to completed work.

---

### EPIC-005: State Management & Integration

**Description:**
Manage state across runs: archiving, sprint status updates, AGENTS.md integration.

**Functional Requirements:**
- FR-007
- FR-008
- FR-010

**Story Count Estimate:** 3-4

**Priority:** Should Have

**Business Value:**
Clean integration with BMAD ecosystem. Maintains history, keeps sprint tracking current, preserves learnings for future work.

---

### EPIC-006: BMAD Workflow Registration

**Description:**
Register Ralph as official BMAD workflow with proper file structure, status tracking, and documentation.

**NFRs Addressed:**
- NFR-007: BMAD Patterns

**Story Count Estimate:** 2-3

**Priority:** Should Have

**Business Value:**
Makes Ralph a first-class BMAD citizen. Discoverable via `/workflow-status`, installable by other users, consistent with ecosystem.

---

## User Stories (High-Level)

User stories follow the format: "As a [user type], I want [goal] so that [benefit]."

These are preliminary stories. Detailed stories will be created in Phase 4 (Sprint Planning).

---

### EPIC-001: BMAD Document Ingestion

- As a developer, I want Ralph to find my product brief so that it understands the project vision and constraints.
- As a developer, I want Ralph to parse my PRD so that it knows all functional requirements and acceptance criteria.
- As a developer, I want Ralph to read my architecture doc so that generated code follows the right patterns and tech stack.
- As a developer, I want Ralph to parse sprint-status.yaml so that it knows which stories to work on and their status.
- As a developer, I want Ralph to read individual story files so that it gets detailed implementation guidance.

---

### EPIC-002: Loop Configuration Interview

- As a developer, I want Ralph to show me what docs it found so that I can verify it has the right context.
- As a developer, I want to select which stories to include so that I can run partial loops or focus on one epic.
- As a developer, I want to specify my quality gate commands so that Ralph enforces my project's standards.
- As a developer, I want to set loop parameters so that I control how long it runs and when it stops.

---

### EPIC-003: Loop File Generation

- As a developer, I want Ralph to generate prd.json from my stories so that the loop can track progress.
- As a developer, I want stories ordered by dependency so that schema changes come before backend, backend before UI.
- As a developer, I want Ralph to generate prompt.md with all project context so that each Claude iteration understands the codebase.
- As a developer, I want Ralph to generate loop.sh for Claude CLI so that I can run autonomous loops.
- As a developer, I want Ralph to initialize progress.txt so that iterations can share learnings with each other.

---

### EPIC-004: Loop Execution & Monitoring

- As a developer, I want Ralph to show a summary and confirm before starting so that I can review the configuration.
- As a developer, I want to see real-time progress so that I know what's happening without reading logs.
- As a developer, I want the loop to stop if stuck so that I don't waste iterations on unsolvable stories.
- As a developer, I want to resume a stopped loop so that I don't lose progress when interrupted.
- As a developer, I want a final summary so that I know what completed and what's left.

---

### EPIC-005: State Management & Integration

- As a developer, I want previous runs archived so that I don't lose history when starting new features.
- As a developer, I want sprint-status.yaml updated as stories complete so that BMAD tracking stays current.
- As a developer, I want AGENTS.md updated with learnings so that future iterations and humans benefit from discoveries.

---

### EPIC-006: BMAD Workflow Registration

- As a BMAD user, I want Ralph registered as a BMAD workflow so that `/workflow-status` shows it as Phase 5.
- As a BMAD user, I want to install Ralph from a package so that I can use it in my projects.
- As a BMAD user, I want Ralph documented in BMAD style so that it's consistent with other workflows I know.

---

## User Personas

### Primary: BMAD Developer

- Has BMAD installed (`~/.claude/config/bmad/`)
- Has completed Phase 1-4 workflows (product brief through sprint planning)
- Wants to automate story implementation instead of manual coding
- Comfortable with CLI, git, and Claude Code
- Understands the Ralph pattern (fresh context per iteration)

### Secondary: BMAD Module Author

- Wants to extend or customize Ralph for their workflow
- May contribute improvements back to the community
- Needs clear code structure and documentation

---

## User Flows

### Flow 1: First-Time Ralph Execution

```
1. User completes sprint-planning (Phase 4)
2. User runs /ralph
3. Ralph scans docs/, finds all BMAD artifacts
4. Ralph displays: "Found: 1 product brief, 1 PRD, 1 architecture, 3 epics, 12 stories"
5. Ralph asks configuration questions (scope, quality gates, limits)
6. Ralph generates: ralph/prd.json, ralph/prompt.md, ralph/loop.sh, ralph/progress.txt
7. Ralph displays summary and asks: "Ready to start?"
8. User confirms
9. Loop executes, showing progress for each iteration
10. Loop completes with summary
11. User reviews implemented code
```

### Flow 2: Resume Interrupted Loop

```
1. User previously ran /ralph, stopped mid-way (Ctrl+C or system restart)
2. User runs /ralph again
3. Ralph detects existing ralph/prd.json with 5 pending stories
4. Ralph asks: "Found existing loop (7/12 complete). Resume or start fresh?"
5. User chooses resume
6. Ralph skips file generation, goes straight to execution
7. Loop continues from story 8
```

### Flow 3: New Feature After Completed Loop

```
1. User completed previous Ralph loop for "user-auth" feature
2. User creates new PRD/architecture/stories for "notifications" feature
3. User runs /ralph
4. Ralph detects ralph/prd.json has branchName "ralph/user-auth"
5. Ralph detects new stories are for different feature
6. Ralph archives: ralph/archive/2026-01-10-user-auth/
7. Ralph proceeds with new "notifications" setup
```

---

## Dependencies

### Internal Dependencies

- BMAD core installed (`~/.claude/config/bmad/`)
- BMAD Phase 1-4 workflows completed:
  - Product brief (optional but recommended)
  - PRD (required - provides requirements)
  - Architecture (required - provides patterns)
  - Sprint planning (required - provides stories)
- Project has `docs/` folder with BMAD artifacts
- Project has `docs/sprint-status.yaml` with stories

### External Dependencies

- **Claude Code CLI** - installed and authenticated with valid subscription
- **jq** - JSON processor for parsing prd.json (`brew install jq` / `apt install jq`)
- **git** - version control, initialized in project
- **bash** - shell environment (macOS/Linux native, WSL on Windows)

---

## Assumptions

- Users have active Claude Code subscription (not free tier)
- Users understand the Ralph pattern (fresh context per iteration, small stories)
- Users have created right-sized stories (completable in one context window)
- Project has working quality gates (test and typecheck commands that actually run)
- Git is configured with user name/email for commits
- Project is in a clean git state before starting (no uncommitted changes)

---

## Out of Scope

- **Multi-agent parallel execution** - Running multiple Claude instances simultaneously (future)
- **Web UI for monitoring** - Browser-based dashboard for loop status (future)
- **Integration with non-BMAD projects** - Use original Ralph repo for those
- **Windows native support** - WSL required, no PowerShell version
- **Automatic story splitting** - User must pre-split large stories manually
- **Custom LLM providers** - Claude Code only, no OpenAI/local models
- **Backward compatibility with Amp** - This is Claude Code only

---

## Open Questions

*All resolved during requirements gathering:*

1. ~~Module structure~~ → Part of `bmm` core (Phase 5)
2. ~~Workflow file location~~ → `~/.claude/config/bmad/modules/bmm/workflows/ralph.md`
3. ~~Template location~~ → `~/.claude/config/bmad/templates/ralph/`

---

## Approval & Sign-off

### Stakeholders

- **jean-philippebrule (Owner)** - High influence. Creator, primary developer, and user.
- **BMAD Community (Users)** - Medium influence. Will use and provide feedback.

### Approval Status

- [x] Product Owner (jean-philippebrule)
- [ ] Engineering Lead
- [ ] Design Lead
- [ ] QA Lead

---

## Revision History

| Version | Date | Author | Changes |
|---------|------|--------|---------|
| 1.0 | 2026-01-10 | jean-philippebrule | Initial PRD |

---

## Next Steps

### Phase 3: Architecture

Run `/architecture` to create system architecture based on these requirements.

The architecture will address:
- Workflow file structure and BMAD integration
- Loop script design (bash components)
- Prompt template design
- File I/O patterns (reading BMAD docs, writing ralph files)
- Error handling and state management

### Phase 4: Sprint Planning

After architecture is complete, run `/sprint-planning` to:
- Break epics into detailed user stories with acceptance criteria
- Order stories by dependency
- Plan sprint iterations
- Begin implementation

---

**This document was created using BMAD Method v6 - Phase 2 (Planning)**

*To continue: Run `/workflow-status` to see your progress and next recommended workflow.*

---

## Appendix A: Requirements Traceability Matrix

| Epic ID | Epic Name | Functional Requirements | Story Count (Est.) |
|---------|-----------|-------------------------|-------------------|
| EPIC-001 | BMAD Document Ingestion | FR-001 | 4-5 |
| EPIC-002 | Loop Configuration Interview | FR-002 | 3-4 |
| EPIC-003 | Loop File Generation | FR-003, FR-004, FR-005, FR-009 | 5-7 |
| EPIC-004 | Loop Execution & Monitoring | FR-006 | 4-6 |
| EPIC-005 | State Management & Integration | FR-007, FR-008, FR-010 | 3-4 |
| EPIC-006 | BMAD Workflow Registration | (NFR-007) | 2-3 |

**Total Estimated Stories:** 21-29

---

## Appendix B: Prioritization Details

### Functional Requirements

| Priority | Count | Requirements |
|----------|-------|--------------|
| Must Have | 6 | FR-001, FR-002, FR-003, FR-004, FR-005, FR-006, FR-009 |
| Should Have | 3 | FR-007, FR-008, FR-010 |
| Could Have | 0 | - |

### Non-Functional Requirements

| Priority | Count | Requirements |
|----------|-------|--------------|
| Must Have | 4 | NFR-001, NFR-002, NFR-005, NFR-006 |
| Should Have | 3 | NFR-003, NFR-004, NFR-007 |

### Epics

| Priority | Count | Epics |
|----------|-------|-------|
| Must Have | 4 | EPIC-001, EPIC-002, EPIC-003, EPIC-004 |
| Should Have | 2 | EPIC-005, EPIC-006 |

---

## Appendix C: Distribution Package

### Files to Distribute

```
bmad-ralph/
├── README.md                           # Installation and usage guide
├── install.sh                          # Installation script
└── bmad/
    └── modules/
        └── bmm/
            └── workflows/
                └── ralph.md            # Main workflow definition
    └── templates/
        └── ralph/
            ├── prompt.template.md      # Prompt template
            ├── loop.template.sh        # Loop script template
            └── progress.template.txt   # Progress file header template
```

### Installation Command

```bash
# Clone and install
git clone https://github.com/user/bmad-ralph
cd bmad-ralph
./install.sh

# Or manual copy
cp -r bmad/* ~/.claude/config/bmad/
```

### Post-Installation

- Ralph appears in `/workflow-status` as Phase 5
- User can run `/ralph` after completing sprint-planning
